<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Å©„Åì„Å´ÁΩÆ„ÅÑ„Åü„Å£„ÅëÔºüÊåÅ„Å°Áâ©„É≠„Ç±„Éº„Çø„Éº | Êé¢„ÅóÁâ©„Çº„É≠ÁîüÊ¥ª</title>
    <meta name="description" content="ÂÆ∂‰∏≠„ÅÆÊåÅ„Å°Áâ©„Çí„Çπ„Éû„Éõ„ÅßÁÆ°ÁêÜ„ÄÇ„Å©„Åì„Å´ÁΩÆ„ÅÑ„Åü„Åã‰∏ÄÁû¨„ÅßÂàÜ„Åã„ÇãÁÑ°Êñô„ÅÆÊï¥ÁêÜÊï¥È†ì„Ç¢„Éó„É™„ÄÇQR„Ç≥„Éº„ÉâÂç∞Âà∑ÂØæÂøú„ÄÇ">
    
    <!-- OGPË®≠ÂÆö -->
    <meta property="og:title" content="„Å©„Åì„Å´ÁΩÆ„ÅÑ„Åü„Å£„ÅëÔºüÊåÅ„Å°Áâ©„É≠„Ç±„Éº„Çø„Éº">
    <meta property="og:description" content="Êé¢„ÅóÁâ©„ÅÆÊôÇÈñì„Çí„Çº„É≠„Å´ÔºÅÊåÅ„Å°Áâ©„ÅÆÂ†¥ÊâÄ„ÇíÈöéÂ±§ÁÆ°ÁêÜ„Åß„Åç„ÇãÁÑ°Êñô„Ç¢„Éó„É™">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://appadaycreator.github.io/item-locator/">
    <meta property="og:image" content="https://appadaycreator.github.io/item-locator/ogp.png">
    <meta property="og:site_name" content="„Å©„Åì„Å´ÁΩÆ„ÅÑ„Åü„Å£„ÅëÔºü">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@appadaycreator">
    
    <!-- PWAË®≠ÂÆö -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4A90E2">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TXQGZRF9');</script>
    <!-- End Google Tag Manager -->
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
        }
        
        .card h2 {
            color: #4A90E2;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }
        
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4A90E2;
        }
        
        .btn {
            background: #4A90E2;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            text-decoration: none;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            background: #357ABD;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 144, 226, 0.3);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-secondary:hover {
            background: #5a6268;
        }
        
        .btn-success {
            background: #28a745;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .tree-view {
            margin-top: 20px;
        }
        
        .tree-item {
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .tree-item:hover {
            background: #e9ecef;
            border-left-color: #4A90E2;
        }
        
        .tree-item.selected {
            background: #e3f2fd;
            border-left-color: #4A90E2;
        }
        
        .tree-children {
            margin-left: 20px;
            margin-top: 5px;
        }
        
        .search-result {
            padding: 15px;
            background: #fffbf0;
            border: 2px solid #ffd700;
            border-radius: 8px;
            margin: 10px 0;
            animation: highlight 0.5s ease;
        }
        
        @keyframes highlight {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4A90E2;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .qr-container {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        #qrcode {
            margin: 20px auto;
        }
        
        .affiliate-section {
            margin-top: 40px;
            padding: 25px;
            background: #f0f8ff;
            border-radius: 12px;
            border: 2px dashed #4A90E2;
        }
        
        .affiliate-section h3 {
            color: #4A90E2;
            margin-bottom: 15px;
        }
        
        .affiliate-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .affiliate-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s;
        }
        
        .affiliate-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .footer-links {
            margin-top: 40px;
            padding: 20px;
            background: #2c3e50;
            border-radius: 8px;
            text-align: center;
        }
        
        .footer-links a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
            font-size: 0.9em;
        }
        
        .footer-links a:hover {
            text-decoration: underline;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }
        
        .modal-content {
            position: relative;
            background: white;
            width: 90%;
            max-width: 600px;
            margin: 50px auto;
            padding: 30px;
            border-radius: 12px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
            color: #999;
        }
        
        .close:hover {
            color: #333;
        }
        
        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .share-btn {
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            color: white;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .share-twitter { background: #1DA1F2; }
        .share-line { background: #00B900; }
        .share-facebook { background: #1877F2; }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TXQGZRF9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <header>
        <h1>üì¶ „Å©„Åì„Å´ÁΩÆ„ÅÑ„Åü„Å£„ÅëÔºüÊåÅ„Å°Áâ©„É≠„Ç±„Éº„Çø„Éº</h1>
        <p class="subtitle">Êé¢„ÅóÁâ©„ÅÆÊôÇÈñì„Çí„Çº„É≠„Å´ÔºÅ„Çπ„Éû„Éõ„ÅßÁ∞°ÂçòÁÆ°ÁêÜ</p>
    </header>
    
    <div class="container">
        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalItems">0</div>
                <div class="stat-label">ÁôªÈå≤„Ç¢„Ç§„ÉÜ„É†</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalLocations">0</div>
                <div class="stat-label">ÂèéÁ¥çÂ†¥ÊâÄ</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="savedTime">0</div>
                <div class="stat-label">ÁØÄÁ¥ÑÊôÇÈñì(ÂàÜ)</div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="card">
                <h2>üîç „Ç¢„Ç§„ÉÜ„É†Ê§úÁ¥¢</h2>
                <div class="form-group">
                    <input type="text" id="searchInput" placeholder="Êé¢„Åó„Åü„ÅÑ„ÇÇ„ÅÆ„ÇíÂÖ•Âäõ...">
                </div>
                <button class="btn" onclick="searchItems()">Ê§úÁ¥¢</button>
                <div id="searchResults"></div>
                
                <h2 style="margin-top: 30px;">‚ûï Êñ∞Ë¶èÁôªÈå≤</h2>
                <div class="form-group">
                    <label>ÂèéÁ¥çÂ†¥ÊâÄÔºàË¶™Ôºâ</label>
                    <select id="parentLocation">
                        <option value="">Êñ∞Ë¶è‰ΩúÊàê</option>
                    </select>
                    <input type="text" id="newParentLocation" placeholder="‰æãÔºö„É™„Éì„É≥„Ç∞„ÅÆÊ£ö" style="margin-top: 10px; display: none;">
                </div>
                
                <div class="form-group">
                    <label>Ë©≥Á¥∞Â†¥ÊâÄ</label>
                    <input type="text" id="detailLocation" placeholder="‰æãÔºö2ÊÆµÁõÆÂ∑¶ÂÅ¥">
                </div>
                
                <div class="form-group">
                    <label>„Ç¢„Ç§„ÉÜ„É†Âêç</label>
                    <input type="text" id="itemName" placeholder="‰æãÔºöÂèñÊâ±Ë™¨ÊòéÊõ∏">
                </div>
                
                <div class="form-group">
                    <label>„É°„É¢Ôºà‰ªªÊÑèÔºâ</label>
                    <input type="text" id="itemMemo" placeholder="‰æãÔºö2023Âπ¥Ë≥ºÂÖ•„ÅÆÊéÉÈô§Ê©ü">
                </div>
                
                <button class="btn" onclick="addItem()">ÁôªÈå≤„Åô„Çã</button>
                <button class="btn btn-secondary" onclick="generateQR()">QR„Ç≥„Éº„ÉâÁîüÊàê</button>
            </div>
            
            <div class="card">
                <h2>üìç ÂèéÁ¥ç„Éû„ÉÉ„Éó</h2>
                <div id="treeView" class="tree-view"></div>
                
                <div style="margin-top: 30px;">
                    <button class="btn btn-success" onclick="shareResults()">üì± SNS„Åß„Ç∑„Çß„Ç¢</button>
                    <button class="btn btn-secondary" onclick="compareWithFriends()">üë• ÂèãÈÅî„Å®ÊØîËºÉ</button>
                    <button class="btn btn-secondary" onclick="showHistory()">üìä Â±•Ê≠¥„ÇíË¶ã„Çã</button>
                </div>
            </div>
        </div>
        
        <div class="affiliate-section">
            <h3>üõçÔ∏è „Åä„Åô„Åô„ÇÅÂèéÁ¥ç„Ç∞„ÉÉ„Ç∫</h3>
            <p>Êï¥ÁêÜÊï¥È†ì„Çí„ÇÇ„Å£„Å®‰æøÂà©„Å´ÔºÅ‰∫∫Ê∞ó„ÅÆÂèéÁ¥ç„Ç¢„Ç§„ÉÜ„É†„Çí„ÉÅ„Çß„ÉÉ„ÇØ</p>
            <div class="affiliate-links">
                <div class="affiliate-card">
                    <h4>ÁÑ°Âç∞ËâØÂìÅ</h4>
                    <p>„Ç∑„É≥„Éó„É´„Åß‰Ωø„ÅÑ„ÇÑ„Åô„ÅÑÂèéÁ¥ç„Éú„ÉÉ„ÇØ„Çπ</p>
                    <a href="#" class="btn" onclick="trackAffiliate('muji')">Ë©≥Á¥∞„ÇíË¶ã„Çã</a>
                </div>
                <div class="affiliate-card">
                    <h4>IKEA</h4>
                    <p>ÂåóÊ¨ß„Éá„Ç∂„Ç§„É≥„ÅÆÂèéÁ¥çÂÆ∂ÂÖ∑</p>
                    <a href="#" class="btn" onclick="trackAffiliate('ikea')">Ë©≥Á¥∞„ÇíË¶ã„Çã</a>
                </div>
                <div class="affiliate-card">
                    <h4>„É©„Éô„É´„Éó„É™„É≥„Çø„Éº</h4>
                    <p>ÂèéÁ¥çÂ†¥ÊâÄ„Çí„É©„Éô„É™„É≥„Ç∞</p>
                    <a href="#" class="btn" onclick="trackAffiliate('label')">Ë©≥Á¥∞„ÇíË¶ã„Çã</a>
                </div>
            </div>
        </div>
        
        <div class="footer-links">
            <a href="#" onclick="showPrivacyPolicy()">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</a>
            <a href="#" onclick="showDisclaimer()">ÂÖçË≤¨‰∫ãÈ†Ö</a>
            <a href="#" onclick="showContact()">„ÅäÂïè„ÅÑÂêà„Çè„Åõ</a>
        </div>
    </div>
    
    <!-- QR„Ç≥„Éº„ÉâË°®Á§∫„É¢„Éº„ÉÄ„É´ -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('qrModal')">&times;</span>
            <h2>QR„Ç≥„Éº„ÉâÂç∞Âà∑</h2>
            <div class="qr-container">
                <div id="qrcode"></div>
                <p>„Åì„ÅÆQR„Ç≥„Éº„Éâ„ÇíÂèéÁ¥çÂ†¥ÊâÄ„Å´Ë≤º„Çä‰ªò„Åë„Å¶„Åè„Å†„Åï„ÅÑ</p>
                <button class="btn" onclick="printQR()">Âç∞Âà∑„Åô„Çã</button>
            </div>
        </div>
    </div>
    
    <!-- SNS„Ç∑„Çß„Ç¢„É¢„Éº„ÉÄ„É´ -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('shareModal')">&times;</span>
            <h2>SNS„Åß„Ç∑„Çß„Ç¢</h2>
            <p>„ÅÇ„Å™„Åü„ÅÆÊï¥ÁêÜÊï¥È†ì„ÅÆÊàêÊûú„Çí„Ç∑„Çß„Ç¢„Åó„Åæ„Åó„Çá„ÅÜÔºÅ</p>
            <div class="share-buttons">
                <a href="#" class="share-btn share-twitter" onclick="shareToTwitter()">üê¶ Twitter</a>
                <a href="#" class="share-btn share-line" onclick="shareToLine()">üí¨ LINE</a>
                <a href="#" class="share-btn share-facebook" onclick="shareToFacebook()">üìò Facebook</a>
            </div>
        </div>
    </div>
    
    <!-- ÂèãÈÅî„Å®ÊØîËºÉ„É¢„Éº„ÉÄ„É´ -->
    <div id="compareModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('compareModal')">&times;</span>
            <h2>ÂèãÈÅî„Å®ÊØîËºÉ</h2>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-label">„ÅÇ„Å™„Åü„ÅÆÁôªÈå≤Êï∞</div>
                    <div class="stat-number" id="yourItems">0</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Âπ≥ÂùáÁôªÈå≤Êï∞</div>
                    <div class="stat-number">87</div>
                </div>
            </div>
            <p style="margin-top: 20px;">ÂèãÈÅî„Ç≥„Éº„Éâ„ÇíÂÖ±Êúâ„Åó„Å¶„ÄÅÊï¥ÁêÜÊï¥È†ì„É¨„Éô„É´„ÇíÊØîËºÉ„Åó„Çà„ÅÜÔºÅ</p>
            <div class="form-group">
                <label>„ÅÇ„Å™„Åü„ÅÆÂèãÈÅî„Ç≥„Éº„Éâ</label>
                <input type="text" id="friendCode" readonly>
                <button class="btn" onclick="copyFriendCode()">„Ç≥„Éî„Éº</button>
            </div>
        </div>
    </div>
    
    <!-- „Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº„É¢„Éº„ÉÄ„É´ -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('privacyModal')">&times;</span>
            <h2>„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</h2>
            <p>ÂΩì„Çµ„Éº„Éì„Çπ„ÅØ„ÄÅ„É¶„Éº„Ç∂„Éº„ÅÆ„Éó„É©„Ç§„Éê„Ç∑„Éº„ÇíÂ∞äÈáç„Åó„ÄÅÂÄã‰∫∫ÊÉÖÂ†±„ÅÆ‰øùË≠∑„Å´Âä™„ÇÅ„Åæ„Åô„ÄÇ</p>
            <h3>ÂèéÈõÜ„Åô„ÇãÊÉÖÂ†±</h3>
            <ul>
                <li>ÁôªÈå≤„Åï„Çå„Åü„Ç¢„Ç§„ÉÜ„É†„Å®ÂèéÁ¥çÂ†¥ÊâÄ„ÅÆÊÉÖÂ†±</li>
                <li>„Ç¢„ÇØ„Çª„ÇπËß£Êûê„ÅÆ„Åü„ÇÅ„ÅÆÂåøÂêçÊÉÖÂ†±</li>
            </ul>
            <h3>ÊÉÖÂ†±„ÅÆÂà©Áî®ÁõÆÁöÑ</h3>
            <ul>
                <li>„Çµ„Éº„Éì„Çπ„ÅÆÊèê‰æõ„ÉªÊîπÂñÑ</li>
                <li>Áµ±Ë®àÊÉÖÂ†±„ÅÆ‰ΩúÊàê</li>
            </ul>
            <h3>„Éá„Éº„Çø„ÅÆ‰øùÂ≠ò</h3>
            <p>„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„ÅØ„ÄÅ„Åä‰Ωø„ÅÑ„ÅÆÁ´ØÊú´„ÅÆ„É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´‰øùÂ≠ò„Åï„Çå„ÄÅÂ§ñÈÉ®„Çµ„Éº„Éê„Éº„Å´„ÅØÈÄÅ‰ø°„Åï„Çå„Åæ„Åõ„Çì„ÄÇ</p>
        </div>
    </div>
    
    <!-- ÂÖçË≤¨‰∫ãÈ†Ö„É¢„Éº„ÉÄ„É´ -->
    <div id="disclaimerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('disclaimerModal')">&times;</span>
            <h2>ÂÖçË≤¨‰∫ãÈ†Ö</h2>
            <p>Êú¨„Çµ„Éº„Éì„Çπ„ÅÆÂà©Áî®„Å´„Çà„ÇäÁîü„Åò„Åü„ÅÑ„Åã„Å™„ÇãÊêçÂÆ≥„Å´„Å§„ÅÑ„Å¶„ÇÇ„ÄÅÈÅãÂñ∂ËÄÖ„ÅØ‰∏ÄÂàá„ÅÆË≤¨‰ªª„ÇíË≤†„ÅÑ„Åæ„Åõ„Çì„ÄÇ</p>
            <ul>
                <li>„Éá„Éº„Çø„ÅÆÊ∂àÂ§±„ÉªÁ†¥Êêç</li>
                <li>„Çµ„Éº„Éì„Çπ„ÅÆ‰∏≠Êñ≠„ÉªÂÅúÊ≠¢</li>
                <li>ÁôªÈå≤ÊÉÖÂ†±„ÅÆÊ≠£Á¢∫ÊÄß</li>
            </ul>
            <p>Êú¨„Çµ„Éº„Éì„Çπ„ÅØÁÑ°Êñô„ÅßÊèê‰æõ„Åï„Çå„Å¶„Åä„Çä„ÄÅ‰∫àÂëä„Å™„ÅèÂ§âÊõ¥„ÉªÁµÇ‰∫Ü„Åô„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ</p>
        </div>
    </div>
    
    <!-- „ÅäÂïè„ÅÑÂêà„Çè„Åõ„É¢„Éº„ÉÄ„É´ -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('contactModal')">&times;</span>
            <h2>„ÅäÂïè„ÅÑÂêà„Çè„Åõ</h2>
            <form onsubmit="submitContact(event)">
                <div class="form-group">
                    <label>„ÅäÂêçÂâç</label>
                    <input type="text" id="contactName" required>
                </div>
                <div class="form-group">
                    <label>„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                    <input type="email" id="contactEmail" required>
                </div>
                <div class="form-group">
                    <label>„ÅäÂïè„ÅÑÂêà„Çè„ÅõÂÜÖÂÆπ</label>
                    <textarea id="contactMessage" rows="5" style="width: 100%; padding: 10px; border: 2px solid #e0e6ed; border-radius: 8px;" required></textarea>
                </div>
                <button type="submit" class="btn">ÈÄÅ‰ø°</button>
            </form>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script>
        // „Éá„Éº„ÇøÊßãÈÄ†
        let locations = JSON.parse(localStorage.getItem('locations') || '{}');
        let items = JSON.parse(localStorage.getItem('items') || '[]');
        let history = JSON.parse(localStorage.getItem('history') || '[]');
        
        // ÂàùÊúüÂåñ
        function init() {
            updateStats();
            renderTree();
            updateParentSelect();
            generateFriendCode();
            
            // PWA Service WorkerÁôªÈå≤
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js');
            }
        }
        
        // Áµ±Ë®àÊÉÖÂ†±Êõ¥Êñ∞
        function updateStats() {
            document.getElementById('totalItems').textContent = items.length;
            document.getElementById('totalLocations').textContent = Object.keys(locations).length;
            document.getElementById('savedTime').textContent = Math.floor(items.length * 3); // 1„Ç¢„Ç§„ÉÜ„É†3ÂàÜ„ÅÆÁØÄÁ¥Ñ„Å®‰ªÆÂÆö
            document.getElementById('yourItems').textContent = items.length;
        }
        
        // Ë¶™Â†¥ÊâÄ„Çª„É¨„ÇØ„ÉàÊõ¥Êñ∞
        function updateParentSelect() {
            const select = document.getElementById('parentLocation');
            select.innerHTML = '<option value="">Êñ∞Ë¶è‰ΩúÊàê</option>';
            
            Object.keys(locations).forEach(loc => {
                const option = document.createElement('option');
                option.value = loc;
                option.textContent = loc;
                select.appendChild(option);
            });
        }
        
        // Ë¶™Â†¥ÊâÄÈÅ∏ÊäûÊôÇ„ÅÆÂá¶ÁêÜ
        document.getElementById('parentLocation').addEventListener('change', function() {
            const newParent = document.getElementById('newParentLocation');
            if (this.value === '') {
                newParent.style.display = 'block';
            } else {
                newParent.style.display = 'none';
            }
        });
        
        // „Ç¢„Ç§„ÉÜ„É†ËøΩÂä†
        function addItem() {
            const parentSelect = document.getElementById('parentLocation');
            const newParentInput = document.getElementById('newParentLocation');
            const detailLocation = document.getElementById('detailLocation').value;
            const itemName = document.getElementById('itemName').value;
            const itemMemo = document.getElementById('itemMemo').value;
            
            if (!itemName || !detailLocation) {
                alert('Ë©≥Á¥∞Â†¥ÊâÄ„Å®„Ç¢„Ç§„ÉÜ„É†Âêç„ÅØÂøÖÈ†à„Åß„Åô');
                return;
            }
            
            let parentLocation = parentSelect.value;
            if (!parentLocation) {
                parentLocation = newParentInput.value;
                if (!parentLocation) {
                    alert('ÂèéÁ¥çÂ†¥ÊâÄ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }
            }
            
            // Â†¥ÊâÄ„ÅÆÈöéÂ±§ÊßãÈÄ†„Çí‰ΩúÊàê
            if (!locations[parentLocation]) {
                locations[parentLocation] = {};
            }
            if (!locations[parentLocation][detailLocation]) {
                locations[parentLocation][detailLocation] = [];
            }
            
            // „Ç¢„Ç§„ÉÜ„É†ËøΩÂä†
            const item = {
                id: Date.now(),
                name: itemName,
                memo: itemMemo,
                parent: parentLocation,
                detail: detailLocation,
                createdAt: new Date().toISOString()
            };
            
            items.push(item);
            locations[parentLocation][detailLocation].push(item);
            
            // Â±•Ê≠¥„Å´ËøΩÂä†
            history.push({
                action: 'add',
                item: item,
                timestamp: new Date().toISOString()
            });
            
            // ‰øùÂ≠ò
            saveData();
            
            // UIÊõ¥Êñ∞
            updateStats();
            renderTree();
            updateParentSelect();
            
            // „Éï„Ç©„Éº„É†„ÇØ„É™„Ç¢
            document.getElementById('detailLocation').value = '';
            document.getElementById('itemName').value = '';
            document.getElementById('itemMemo').value = '';
            document.getElementById('newParentLocation').value = '';
            
            alert('„Ç¢„Ç§„ÉÜ„É†„ÇíÁôªÈå≤„Åó„Åæ„Åó„ÅüÔºÅ');
        }
        
        // „Éá„Éº„Çø‰øùÂ≠ò
        function saveData() {
            localStorage.setItem('locations', JSON.stringify(locations));
            localStorage.setItem('items', JSON.stringify(items));
            localStorage.setItem('history', JSON.stringify(history));
        }
        
        // „ÉÑ„É™„ÉºË°®Á§∫
        function renderTree() {
            const treeView = document.getElementById('treeView');
            treeView.innerHTML = '';
            
            Object.keys(locations).forEach(parent => {
                const parentDiv = document.createElement('div');
                parentDiv.className = 'tree-item';
                parentDiv.innerHTML = `üì¶ ${parent}`;
                parentDiv.onclick = () => toggleChildren(parentDiv);
                
                const childrenDiv = document.createElement('div');
                childrenDiv.className = 'tree-children';
                childrenDiv.style.display = 'none';
                
                Object.keys(locations[parent]).forEach(detail => {
                    const detailDiv = document.createElement('div');
                    detailDiv.className = 'tree-item';
                    detailDiv.innerHTML = `üìç ${detail} (${locations[parent][detail].length}ÂÄã)`;
                    
                    const itemsDiv = document.createElement('div');
                    itemsDiv.className = 'tree-children';
                    itemsDiv.style.display = 'none';
                    
                    locations[parent][detail].forEach(item => {
                        const itemDiv = document.createElement('div');
                        itemDiv.className = 'tree-item';
                        itemDiv.innerHTML = `üìÑ ${item.name} ${item.memo ? `(${item.memo})` : ''}`;
                        itemsDiv.appendChild(itemDiv);
                    });
                    
                    detailDiv.onclick = (e) => {
                        e.stopPropagation();
                        itemsDiv.style.display = itemsDiv.style.display === 'none' ? 'block' : 'none';
                    };
                    
                    detailDiv.appendChild(itemsDiv);
                    childrenDiv.appendChild(detailDiv);
                });
                
                parentDiv.appendChild(childrenDiv);
                treeView.appendChild(parentDiv);
            });
        }
        
        // Â≠êË¶ÅÁ¥†„ÅÆË°®Á§∫ÂàáÊõø
        function toggleChildren(element) {
            const children = element.querySelector('.tree-children');
            if (children) {
                children.style.display = children.style.display === 'none' ? 'block' : 'none';
            }
        }
        
        // „Ç¢„Ç§„ÉÜ„É†Ê§úÁ¥¢
        function searchItems() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '';
            
            if (!query) {
                return;
            }
            
            const results = items.filter(item => 
                item.name.toLowerCase().includes(query) || 
                (item.memo && item.memo.toLowerCase().includes(query))
            );
            
            if (results.length === 0) {
                resultsDiv.innerHTML = '<p>Ë¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü</p>';
                return;
            }
            
            results.forEach(item => {
                const resultDiv = document.createElement('div');
                resultDiv.className = 'search-result';
                resultDiv.innerHTML = `
                    <strong>${item.name}</strong><br>
                    üìç ${item.parent} ‚Üí ${item.detail}<br>
                    ${item.memo ? `üìù ${item.memo}` : ''}
                `;
                resultsDiv.appendChild(resultDiv);
            });
            
            // Ê§úÁ¥¢Â±•Ê≠¥„Å´ËøΩÂä†
            history.push({
                action: 'search',
                query: query,
                results: results.length,
                timestamp: new Date().toISOString()
            });
            saveData();
        }
        
        // QR„Ç≥„Éº„ÉâÁîüÊàê
        function generateQR() {
            const modal = document.getElementById('qrModal');
            modal.style.display = 'block';
            
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = '';
            
            const data = {
                locations: Object.keys(locations).length,
                items: items.length,
                url: window.location.href
            };
            
            new QRCode(qrContainer, {
                text: JSON.stringify(data),
                width: 200,
                height: 200
            });
        }
        
        // QRÂç∞Âà∑
        function printQR() {
            window.print();
        }
        
        // SNS„Ç∑„Çß„Ç¢
        function shareResults() {
            document.getElementById('shareModal').style.display = 'block';
        }
        
        function shareToTwitter() {
            const text = `${items.length}ÂÄã„ÅÆ„Ç¢„Ç§„ÉÜ„É†„ÇíÊï¥ÁêÜÊï¥È†ìÔºÅ
Êé¢„ÅóÁâ©„ÅÆÊôÇÈñì„Çí${Math.floor(items.length * 3)}ÂàÜÁØÄÁ¥Ñ„Åß„Åç„Åæ„Åó„Åü‚ú®

ÁÑ°Êñô„ÅÆÊåÅ„Å°Áâ©„É≠„Ç±„Éº„Çø„Éº„Åß„Äå„Å©„Åì„Å´ÁΩÆ„ÅÑ„Åü„Å£„ÅëÔºü„Äç„ÇíËß£Ê±∫ÔºÅ

#Á∂ôÁ∂ö„ÅØÂäõ„Å™„Çä #Êï¥ÁêÜÊï¥È†ì #Áâá‰ªò„Åë #„É©„Ç§„Éï„Éè„ÉÉ„ÇØ`;
            
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`;
            window.open(url, '_blank');
        }
        
        function shareToLine() {
            const text = `${items.length}ÂÄã„ÅÆ„Ç¢„Ç§„ÉÜ„É†„ÇíÊï¥ÁêÜÊï¥È†ìÔºÅÁÑ°Êñô„ÅÆÊåÅ„Å°Áâ©„É≠„Ç±„Éº„Çø„Éº„ÅßÊé¢„ÅóÁâ©„Çº„É≠ÁîüÊ¥ª„ÇíÂßã„ÇÅ„Çà„ÅÜÔºÅ`;
            const url = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
        
        function shareToFacebook() {
            const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`;
            window.open(url, '_blank');
        }
        
        // ÂèãÈÅî„Å®ÊØîËºÉ
        function compareWithFriends() {
            document.getElementById('compareModal').style.display = 'block';
        }
        
        // ÂèãÈÅî„Ç≥„Éº„ÉâÁîüÊàê
        function generateFriendCode() {
            const code = 'IL' + Math.random().toString(36).substr(2, 6).toUpperCase();
            document.getElementById('friendCode').value = code;
        }
        
        // ÂèãÈÅî„Ç≥„Éº„Éâ„Ç≥„Éî„Éº
        function copyFriendCode() {
            const codeInput = document.getElementById('friendCode');
            codeInput.select();
            document.execCommand('copy');
            alert('ÂèãÈÅî„Ç≥„Éº„Éâ„Çí„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅ');
        }
        
        // Â±•Ê≠¥Ë°®Á§∫
        function showHistory() {
            const recentHistory = history.slice(-10).reverse();
            let historyText = 'ÊúÄËøë„ÅÆÂ±•Ê≠¥Ôºö\n\n';
            
            recentHistory.forEach(h => {
                const date = new Date(h.timestamp).toLocaleString('ja-JP');
                if (h.action === 'add') {
                    historyText += `üì¶ ${date}: ${h.item.name}„ÇíÁôªÈå≤\n`;
                } else if (h.action === 'search') {
                    historyText += `üîç ${date}: "${h.query}"„ÇíÊ§úÁ¥¢ (${h.results}‰ª∂)\n`;
                }
            });
            
            alert(historyText);
        }
        
        // „É¢„Éº„ÉÄ„É´Èñâ„Åò„Çã
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // „Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„ÉºË°®Á§∫
        function showPrivacyPolicy() {
            document.getElementById('privacyModal').style.display = 'block';
        }
        
        // ÂÖçË≤¨‰∫ãÈ†ÖË°®Á§∫
        function showDisclaimer() {
            document.getElementById('disclaimerModal').style.display = 'block';
        }
        
        // „ÅäÂïè„ÅÑÂêà„Çè„ÅõË°®Á§∫
        function showContact() {
            document.getElementById('contactModal').style.display = 'block';
        }
        
        // „ÅäÂïè„ÅÑÂêà„Çè„ÅõÈÄÅ‰ø°
        function submitContact(e) {
            e.preventDefault();
            alert('„ÅäÂïè„ÅÑÂêà„Çè„Åõ„ÇíÂèó„Åë‰ªò„Åë„Åæ„Åó„Åü„ÄÇËøî‰ø°„Åæ„Åß2-3Âñ∂Ê•≠Êó•„ÅäÂæÖ„Å°„Åè„Å†„Åï„ÅÑ„ÄÇ');
            closeModal('contactModal');
        }
        
        // „Ç¢„Éï„Ç£„É™„Ç®„Ç§„Éà„Éà„É©„ÉÉ„Ç≠„É≥„Ç∞
        function trackAffiliate(type) {
            // „Åì„Åì„Å´ÂÆüÈöõ„ÅÆ„Ç¢„Éï„Ç£„É™„Ç®„Ç§„Éà„É™„É≥„ÇØ„ÇíË®≠ÂÆö
            const affiliateLinks = {
                'muji': 'https://px.a8.net/svt/ejp?a8mat=XXXXX', // A8.net„ÅÆÁÑ°Âç∞ËâØÂìÅ
                'ikea': 'https://hb.afl.rakuten.co.jp/XXXXX', // Ê•ΩÂ§©„ÅÆIKEA
                'label': 'https://www.amazon.co.jp/dp/XXXXX?tag=XXXXX' // Amazon„ÅÆ„É©„Éô„É´„Éó„É™„É≥„Çø„Éº
            };
            
            if (affiliateLinks[type]) {
                window.open(affiliateLinks[type], '_blank');
            }
        }
        
        // Enter„Ç≠„Éº„ÅßÊ§úÁ¥¢
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchItems();
            }
        });
        
        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
        
        // ÂàùÊúüÂåñÂÆüË°å
        init();
    </script>
</body>
</html>